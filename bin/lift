#!/usr/bin/env lua

--collectgarbage('stop') -- disable GC by default

local cli = require 'lift.cli'
local config = require 'lift.config'
local diagnostics = require 'lift.diagnostics'

local app = cli.new_standard_app()
function app:run()
  -- TODO
  self:consume('command')
end

local ok = diagnostics.wrap(function()
  local command = app:parse(arg)
  config:init()
  command()
end)

os.exit(ok and 0 or 1) -- Lua 5.1 compatibility
